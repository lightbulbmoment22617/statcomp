z <- rep(1:10, times = 10)
data <- data.frame(z = z, y = 2 * z + rnorm(length(z), sd = 4))
clear
ls()
rm(list=ls())
gc()
data <- data.frame(z = z, y = 2 * z + rnorm(length(z), sd = 4))
z <- rep(1:10, times = 10)
data <- data.frame(z = z, y = 2 * z + rnorm(length(z), sd = 4))
z
data
View(data)
?rnorm
plot(data.z, data.y)
plot(data$z, data$y)
?lm
?c
?lm
mod = lm(y~z, data=data)
View(mod)
newdata <- data.frame(z=-10:20)
mod.predict()
?predict
predict(mod)
?points
plot(data$z, data$y)
lines(data$z, predict(mod))
plot(newdata$z, data$y)
plot(data$z, data$y)
lines(newdata$z, predict(mod))
lines(data$z, predict(mod))
View(mod)
lines(newdata$z, predict(mod, newdata))
lines(newdata$z, predict(mod, newdata))
newdata$z
rep(0, times=length(newdata))+data$y
rep(0, times=length(newdata))
length(newdata)
newdata
length(newdata$z)
rep(0, times=length(newdata$z))
rep(0, times=length(newdata$z)) + data$y
plot(data$z, data$y, xlim=c(-10,20))
lines(newdata$z, predict(mod, newdata))
?abline
View(mod)
mod$coefficients
mod$coefficients[1]
plot(data$z, data$y, xlim=c(-10,20))
abline(mod$coefficients[1], mod$coefficients[2])
lines(newdata$z, predict(mod, newdata), col='g')
lines(newdata$z, predict(mod, newdata), col='green')
abline(mod$coefficients[1], mod$coefficients[2])
lines(newdata$z, predict(mod, newdata), col='green')
abline(mod$coefficients[1], mod$coefficients[2])
plot(data$z, data$y, xlim=c(-10,20), ylim=c(-10,40))
abline(mod$coefficients[1], mod$coefficients[2])
plot(data$z, data$y, xlim=c(-10,20),)
lines(newdata$z, predict(mod, newdata), col='green')
abline(mod$coefficients[1], mod$coefficients[2])
plot(data$z, data$y, xlim=c(-10,20))
lines(newdata$z, predict(mod, newdata), col='green')
abline(0, mod$coefficients[2])
abline(mod$coefficients[1], mod$coefficients[2])
lines(newdata$z, predict(mod, newdata), col='green')
plot(data$z, data$y, xlim=c(-10,20))
lines(newdata$z, predict(mod, newdata), col='green')
abline(mod$coefficients[1], mod$coefficients[2])
predict(mod, newdata)
?lines
?abline
plot(data$z, data$y, xlim=c(-10,20))
lines(newdata$z, predict(mod, newdata), col='green')
abline(0, 2)
plot(data$z, data$y, xlim=c(-10,20))
lines(newdata$z, predict(mod, newdata, interval="prediction"), col='green')
lines(newdata$z, predict(mod, newdata, interval="prediction"), col='green')
pred <- predict(mod, newdata, interval="prediction")
str(pred)
View(pred)
pred[1]
View(pred)
plot(data$z, data$y, xlim=c(-10,20))
pred <- predict(mod, newdata, interval="prediction")
lines(newdata$z, pred$fit)
lines(newdata$z, pred$lwr, lty=2, ylim=range(pred))
lines(newdata$z, pred$upr, lty=2, ylim=range(pred))
pred
pred[fit]
type(pred)
pred[:,1]
pred[,1]
View(pred)
plot(data$z, data$y, xlim=c(-10,20))
pred <- predict(mod, newdata, interval="prediction")
lines(newdata$z, pred[,1])
lines(newdata$z, pred[,2], lty=2, ylim=range(pred))
lines(newdata$z, pred[,3], lty=2, ylim=range(pred))
abline(0, 2, col='red')
?plot
plot_predictions <- function(x, newdata, xname="x") {
pred <- predict(x, newdata, interval="prediction")
ylim <- range(pred)
plot(xname, pred[,1], type='l')
lines(xname, pred[,2], ylim=ylim, lty=2)
lines(xname, pred[,2], ylim=ylim, lty=2)
}
plot_predictions(mod, newdata, xname='z')
points(data$z, data$y, pch=20)
abline(0, 2, col=2)
plot_predictions(mod, newdata, xname='z')
points(data$z, data$y, pch=20)
abline(0, 2, col=2)
plot_predictions <- function(x, newdata, xname="x") {
pred <- predict(x, newdata, interval="prediction")
ylim <- range(pred)
plot(newdata$xname, pred[,1], type='l')
lines(newdata$xname, pred[,2], ylim=ylim, lty=2)
lines(newdata$xname, pred[,2], ylim=ylim, lty=2)
}
plot_predictions(mod, newdata, xname='z')
points(data$z, data$y, pch=20)
abline(0, 2, col=2)
xname='z'
newdata$xname
newdata[xname]
plot_predictions <- function(x, newdata, xname="x") {
pred <- predict(x, newdata, interval="prediction")
ylim <- range(pred)
plot(newdata[xname], pred[,1], type='l')
lines(newdata[xname], pred[,2], ylim=ylim, lty=2)
lines(newdata[xname], pred[,2], ylim=ylim, lty=2)
}
plot_predictions(mod, newdata, xname='z')
points(data$z, data$y, pch=20)
abline(0, 2, col=2)
newdata$z
newdata[xname]
c(newdata[xname])
plot_predictions <- function(x, newdata, xname="x") {
pred <- predict(x, newdata, interval="prediction")
ylim <- range(pred)
plot(c(newdata[xname]), pred[,1], type='l')
lines(c(newdata[xname]), pred[,2], ylim=ylim, lty=2)
lines(c(newdata[xname]), pred[,2], ylim=ylim, lty=2)
}
plot_predictions(mod, newdata, xname='z')
points(data$z, data$y, pch=20)
abline(0, 2, col=2)
c(newdata[xname])
pred <- predict(mod, newdata, interval='prediction')
pred[,1]
length(c(newdata[xname]))
length(pred[,1])
length(newdata[xname])
length(newdata)
newdata
length(newdata$z)
length(newdata$xname)
length(newdata$(xname))
typeof(newdata)
newdata$[xname]
newdata.xname
newdata[xname]
c(newdata[xname])
length(c(newdata[xname]))
c(newdata[[xname]])
length(c(newdata[[xname]]))
newdata[[xname]]
length(newdata[[xname]])
plot_predictions <- function(x, newdata, xname="x") {
pred <- predict(x, newdata, interval="prediction")
ylim <- range(pred)
plot(newdata[[xname]], pred[,1], type='l')
lines(newdata[[xname]], pred[,2], ylim=ylim, lty=2)
lines(newdata[[xname]], pred[,2], ylim=ylim, lty=2)
}
plot_predictions(mod, newdata, xname='z')
points(data$z, data$y, pch=20)
abline(0, 2, col=2)
plot_predictions <- function(x, newdata, xname="x") {
pred <- predict(x, newdata, interval="prediction")
ylim <- range(pred)
plot(newdata[[xname]], pred[,1], type='l')
lines(newdata[[xname]], pred[,2], ylim=ylim, lty=2)
lines(newdata[[xname]], pred[,3, ylim=ylim, lty=2)
}
plot_predictions <- function(x, newdata, xname="x") {
pred <- predict(x, newdata, interval="prediction")
ylim <- range(pred)
plot(newdata[[xname]], pred[,1], type='l')
lines(newdata[[xname]], pred[,2], ylim=ylim, lty=2)
lines(newdata[[xname]], pred[,3], ylim=ylim, lty=2)
}
plot_predictions(mod, newdata, xname='z')
points(data$z, data$y, pch=20)
abline(0, 2, col=2)
plot_predictions(mod, newdata, xname='z')
points(data$z, data$y, pch=20)
abline(0, 2, col=2)
plot_predictions <- function(x, newdata, xname="x", ...) {
pred <- predict(x, newdata, interval="prediction")
ylim <- range(pred)
plot(newdata[[xname]], pred[,1], type='l', ...)
lines(newdata[[xname]], pred[,2], ylim=ylim, lty=2)
lines(newdata[[xname]], pred[,3], ylim=ylim, lty=2)
}
plot_predictions(mod, newdata, xname='z', xlab='z', ylab='y')
points(data$z, data$y, pch=20)
abline(0, 2, col=2)
mod2 <- lm(y~1+z+I(z^2), data)
plot_predictions(mod2, newdata, xname='z', xlab='z', ylab='y')
points(data$z, data$y, pch=20)
abline(0, 2, col=2)
formulas <- c(y~1,
y~z,
y~z+I(z^2),
y~z+I(z^2)+I(z^3))
mods <- lapply(formulas, function(x) lm(x, data=newdata))
mods <- lapply(formulas, function(x) lm(x, data=data))
par(mfrow = c(2, 2))
for (k in seq_along(formulas))
{
plot_predictions(mods[[k]], newdata, xname = "z", ylab = "y",
main=as.character(formulas[k]))
points(data$z, data$y, pch=20)
abline(0, 2, col = 2)
}
par(mfrow = c(1, 1))
plot_predictions <- function(x, newdata, xname="x", ...) {
pred <- predict(x, newdata, interval="prediction")
ylim <- range(pred)
plot(newdata[[xname]], pred[,1], ylim=ylim type='l', ...)
lines(newdata[[xname]], pred[,2], ylim=ylim, lty=2)
lines(newdata[[xname]], pred[,3], ylim=ylim, lty=2)
}
mod2 <- lm(y~1+z+I(z^2), data)
plot_predictions(mod2, newdata, xname='z', xlab='z', ylab='y')
points(data$z, data$y, pch=20)
abline(0, 2, col=2)
formulas <- c(y~1,
y~z,
y~z+I(z^2),
y~z+I(z^2)+I(z^3))
mods <- lapply(formulas, function(x) lm(x, data=data))
par(mfrow = c(2, 2))
for (k in seq_along(formulas))
{
plot_predictions(mods[[k]], newdata, xname = "z", ylab = "y",
main=as.character(formulas[k]))
points(data$z, data$y, pch=20)
abline(0, 2, col = 2)
}
par(mfrow = c(1, 1))
par(mfrow = c(2, 2))
for (k in seq_along(formulas))
{
plot_predictions(mods[[k]], newdata, xname = "z", xlab='z', ylab = "y",
main=as.character(formulas[k]))
points(data$z, data$y, pch=20)
abline(0, 2, col = 2)
}
par(mfrow = c(1, 1))
plot_predictions <- function(x, newdata, xname="x", ...) {
pred <- predict(x, newdata, interval="prediction")
ylim <- range(pred)
plot(newdata[[xname]], pred[,1], ylim=ylim, type='l', ...)
lines(newdata[[xname]], pred[,2], ylim=ylim, lty=2)
lines(newdata[[xname]], pred[,3], ylim=ylim, lty=2)
}
formulas <- c(y~1,
y~z,
y~z+I(z^2),
y~z+I(z^2)+I(z^3))
mods <- lapply(formulas, function(x) lm(x, data=data))
par(mfrow = c(2, 2))
for (k in seq_along(formulas))
{
plot_predictions(mods[[k]], newdata, xname = "z", xlab='z', ylab = "y",
main=as.character(formulas[k]))
points(data$z, data$y, pch=20)
abline(0, 2, col = 2)
}
par(mfrow = c(1, 1))
?seq_along
